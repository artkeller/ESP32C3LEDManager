# ESP32C3 Super Mini Plus LED Control Library

## Overview
This library provides a convenient and robust way to control the onboard blue LED and the onboard NeoPixel (WS2812B RGB LED) on the **TENSTAR ESP32-C3 SuperMini Plus Development Board (V2.0 Red Board)**. It abstracts away the complexities arising from both LEDs sharing the same GPIO pin (GPIO8) and the specific timing conflicts that can occur.

The Unique Challenge: Shared GPIO8 and Peripherie Conflicts
The ESP32-C3 Super Mini Plus board, while incredibly compact and versatile, presents a unique challenge for developers: both its onboard blue LED and its onboard NeoPixel (WS2812B RGB LED) are wired to the same GPIO pin: GPIO8.

This shared pin creates a complex interaction because:

The blue LED is typically controlled using simple digital HIGH/LOW signals or Pulse Width Modulation (PWM) via the ESP32's LEDC peripheral. On this specific board, the blue LED is nicht invertiert (LOW = AUS, HIGH = AN).

The NeoPixel (WS2812B) requires a highly precise, time-sensitive serial data stream, which is generated by the ESP32's RMT (Remote Control Transceiver) peripheral.

### The Problem:
Directly switching between these two control methods on the same pin can lead to unexpected behavior. Our extensive testing revealed a critical issue: when the blue LED is controlled with PWM at a very high duty cycle (e.g., values above 240 on an 8-bit resolution), the NeoPixel LED can misinterpret this as a corrupted data signal and abruptly switch to full white brightness. This is due to the NeoPixel's internal watchdog timer, which defaults to white when it doesn't receive valid data for a certain period. This phenomenon is a direct result der zu hohen Tastrate des PWM-Signals, das die NeoPixel-LED triggert.

Motivation for this Library:
Unlike many other ESP32-C3 boards or similar microcontrollers, this specific "Super Mini Plus" variant does not separate these LED controls onto different GPIOs, nor does it provide clear documentation on how to manage this shared resource. This library was developed through trial-and-error to provide a "convenience" layer that handles these intricate pin-state transitions and peripheral activations/deactivations automatically. It ensures that both LEDs can be controlled reliably and independently, preventing the unwanted NeoPixel "white flash" and other glitches by carefully managing the GPIO8 state and limiting the blue LED's PWM duty cycle.

### Important Note: GPIO8 and I2C (SDA)
While the ESP32-C3 features a flexible GPIO matrix that theoretically allows I2C (SDA/SCL) signals to be routed to almost any GPIO pin ,    

using GPIO8 for I2C SDA on this specific board is strongly discouraged.

Given that GPIO8 is already shared by both the onboard blue LED and the onboard NeoPixel, attempting to use it simultaneously for I2C communication will inevitably lead to severe conflicts, unreliable operation, and unpredictable behavior for all connected components. The RMT peripheral (used by NeoPixel) and the LEDC peripheral (used by the blue LED's PWM) both demand precise control over GPIO8, making it unsuitable for a third, concurrent peripheral like I2C.

For I2C peripherals, please choose other available GPIO pins on the board. Default I2C pins for ESP32 in Arduino IDE are often GPIO21 (SDA) and GPIO22 (SCL), but other pins like GPIO4 (SDA) and GPIO5 (SCL) are also common on ESP32-C3 boards. The ESP32's GPIO matrix allows you to define I2C pins in your code using Wire.begin(SDA_PIN, SCL_PIN);.   

## Installation
Download: Download this repository as a ZIP file.

Arduino IDE: In the Arduino IDE, go to Sketch > Include Library > Add.ZIP Library... and select the downloaded ZIP file.

Dependencies: This library depends on the Adafruit NeoPixel library. Install it via the Arduino Library Manager (Sketch > Include Library > Manage Libraries... and search for "Adafruit NeoPixel").

### Board Settings:

Select Tools > Board > ESP32 Arduino > ESP32C3 Dev Module.

Ensure Tools > USB CDC On Boot is set to Enabled for serial output.

## Usage
Include the library in your sketch:
```cpp
	#include "ESP32C3LEDManager.h"
```


Create an instance of the `ESP32C3LEDManager` class, specifying the shared GPIO pin (8) and the number of NeoPixels (1 for the onboard RGB LED):
```cpp
ESP32C3LEDManager ledManager(8, 1);
```

You can then use the following methods to control the LEDs:

### Blue LED Control
```cpp
	ledManager.blueLEDOn();
	ledManager.blueLEDOff();
	ledManager.blueLEDToggle();
	ledManager.blueLEDFade(targetBrightness, durationMs); // targetBrightness 0-240, to avoid NeoPixel triggering
	ledManager.blueLEDSquareWave(frequencyHz, durationMs);
```

### NeoPixel LED Control
```cpp
	ledManager.neoPixelSetColor(r, g, b);
	ledManager.neoPixelSetColorHSV(hue, sat, val);
	ledManager.neoPixelColorFade(durationMs);
	ledManager.neoPixelOn(); (Sets to full white)
	ledManager.neoPixelOff();
```
## Example Sketches
This repository includes two example sketches:

	examples/BasicDemo/BasicDemo.ino: A simple demonstration of core functionalities.

	examples/FullDemo/FullDemo.ino: A comprehensive test that cycles through all available methods for both LEDs to demonstrate their independent operation despite sharing GPIO8.
 
